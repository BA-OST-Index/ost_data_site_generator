{% extends "template/zh_cn/base.html" %}

{% block title %}曲子/{{ track.no }}. {{ track.name.realname.en }} ({{ track.name.realname.zh_cn }}){% endblock title %}
{% block other_head %}
    <script src="/static/js/track_player.js"></script>
{% endblock other_head %}
{% block article_content %}
    {% from "template/zh_cn/_macro.html" import track_type_for_show, output_usedby_background, output_usedby_story, output_usedby_battle, output_usedby_ui, output_usedby_video, nothing_to_show, output_usedby_character_dict, track_version_video_player %}

    <h1>曲子/{{ track.no }}. {{ track.name.realname.en }} {% if track.name.realname.zh_cn %}({{ track.name.realname.zh_cn }}){% endif %}</h1>
    {% include "template/zh_cn/infobox/track.html" %}
    <p><b>{{ track.name.realname.en }}</b> {% if track.name.realname.zh_cn %}(<b>{{ track.name.realname.zh_cn }}</b>){% endif %} 是{{ track_type_for_show(track) }}中的第{{ track.no }}首曲子。</p>
    <p>{{ track.desc.zh_cn }}</p>
    <h2>名称翻译</h2>
    <h3>原始名称</h3>
    <ul>
        <li>English: {{ track.name.realname.en }}</li>
        <li>中文简体：{{ track.name.realname.zh_cn }}</li>
        <li>中文繁體：{{ track.name.realname.zh_tw }}</li>
    </ul>
    <h3>其他名称</h3>
    <ul>
        {% for i in track.name.known_as %}
            <li>{{ i.en }} / {{ i.zh_cn }} / {{ i.zh_tw }}</li>
        {% else %}
            <li>{{ nothing_to_show }}</li>
        {% endfor %}
    </ul>
    <h2>在线播放音乐</h2>
    <p>提示：为避免潜在版权侵犯风险，我们此处使用的<b>第三方嵌入式网页播放器</b>来提供服务。你也可以在信息栏（infobox）中手动访问它们。</p>
    <p>单击下列链接时，您也同时同意各平台/服务提供商的对应服务条款。</p>
    {{ track_version_video_player(track.version) }}
    <h2>使用信息</h2>
    <p>此处显示引用了这首曲子的实例。</p>
    <h3>背景</h3>
    {{ output_usedby_background(track.used_by.data_background, "track-" + track.instance_id) }}
    <h3>故事</h3>
    {{ output_usedby_story(track.used_by.data_story, track.uuid, "track") }}
    <h3>战斗</h3>
    {{ output_usedby_battle(track.used_by.data_battle) }}
    <h3>UI</h3>
    {{ output_usedby_ui(track.used_by.data_ui) }}
    <h3>视频</h3>
    {{ output_usedby_video(track.used_by.data_video, "track-" + track.instance_id) }}
    <h3>人物角色</h3>
    <p>注意：以下列表主要基于引用次数（见下表的数字）进行排序。</p>
    {{ output_usedby_character_dict(track.used_by.data_character, "track-" + track.instance_id) }}
{% endblock article_content %}